<?xml version="1.0" encoding="utf-8" ?>

<views:ContentPageBase
    x:Class="PlantCare.App.Views.PlantDetailView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="clr-namespace:PlantCare.App.Views"
    xmlns:vm="clr-namespace:PlantCare.App.ViewModels"
    Title="{Binding Name}"
    x:DataType="vm:PlantDetailViewModel">
    <Grid>
        <ScrollView>
            <StackLayout Padding="10">
                <Image Aspect="AspectFit" Source="{Binding PhotoPath}" />
                <Grid ColumnDefinitions="*,Auto">
                    <Label
                        FontAttributes="Bold"
                        FontSize="Large"
                        HorizontalTextAlignment="Center"
                        Text="{Binding Name}"
                        VerticalTextAlignment="Center" />
                    <Button
                        Grid.Column="1"
                        Margin="5"
                        Command="{Binding NavigateToEditPlantCommand}"
                        FontFamily="MaterialIconsRegular"
                        FontSize="20"
                        HorizontalOptions="End"
                        Text="&#xe3c9;"
                        WidthRequest="50" />
                </Grid>

                <Label FontSize="Medium" Text="{Binding Species}" />
                <HorizontalStackLayout>
                    <Label Text="Age: " />
                    <Label Text="{Binding Age}" />
                </HorizontalStackLayout>

                <Label Text="{Binding LastWatered, StringFormat='Last watering on: {0:MM/dd/yyyy HH:mm}'}" />
                <Label Text="{Binding NextWateringTime, StringFormat='Next watering on: {0:MM/dd/yyyy HH:mm}'}" />

                <HorizontalStackLayout>
                    <Label Text="Next watering in " />
                    <Label Text="{Binding HoursUntilNextWatering}" />
                    <Label Text=" hours" />
                </HorizontalStackLayout>

                <Button
                    Margin="0,10,0,0"
                    Command="{Binding DeletePlantCommand}"
                    HorizontalOptions="Center"
                    Text="Delete Plant" />

                <!--<VerticalStackLayout Grid.Row="1">

                    <Button
                        Margin="0,10,0,0"
                        Command="{Binding ChangeStatusCommand}"
                        IsVisible="{Binding IsEnabled, Source={RelativeSource Self}}"
                        Text="Watered" />
                    <Button
                        Margin="0,10,0,0"
                        BackgroundColor="{StaticResource Error}"
                        Text="Delete Plant" />
                </VerticalStackLayout>-->
            </StackLayout>
        </ScrollView>
        <Grid BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray500}}" IsVisible="{Binding IsLoading}">
            <ActivityIndicator IsRunning="{Binding IsLoading}" />
        </Grid>
    </Grid>
</views:ContentPageBase>